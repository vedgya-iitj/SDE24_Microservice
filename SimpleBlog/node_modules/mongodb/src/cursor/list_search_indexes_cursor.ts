import type { Collection } from 'mongodb/src/collection';
import type { AggregateOptions } from 'mongodb/src/operations/aggregate';
import { AggregationCursor } from 'mongodb/src/cursor/aggregation_cursor';

/** @public */
export type ListSearchIndexesOptions = Omit<AggregateOptions, 'readConcern' | 'writeConcern'>;

/** @public */
export class ListSearchIndexesCursor extends AggregationCursor<{ name: string }> {
  /** @internal */
  constructor(
    { fullNamespace: ns, client }: Collection,
    name: string | null,
    options: ListSearchIndexesOptions = {}
  ) {
    const pipeline =
      name == null ? [{ $listSearchIndexes: {} }] : [{ $listSearchIndexes: { name } }];
    super(client, ns, pipeline, options);
  }
}
